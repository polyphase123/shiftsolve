<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>IIEE 50th Convention</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f3f4f6;
            -webkit-tap-highlight-color: transparent;
            overscroll-behavior-y: none;
        }
        
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        html { scroll-behavior: smooth; }

        .app-container {
            max-width: 480px; 
            margin: 0 auto;
            background-color: #ffffff;
            min-height: 100vh;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            position: relative;
            padding-bottom: 90px;
        }

        /* Card Animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }

        /* Specific styles for the reference look */
        .top-dev-bar { background-color: #1a237e; color: #fff; font-size: 0.65rem; }
        .main-header { background-color: #283593; }
        .sim-time-bar { background-color: #3949ab; }
        .tab-active { border-bottom: 3px solid #fbc02d; color: #fbc02d; font-weight: 700; }
        .tab-inactive { color: #c5cae9; }
        .event-card { border-left: 6px solid #42a5f5; }
        .bottom-nav-shadow { box-shadow: 0 -4px 20px rgba(0,0,0,0.05); }

        /* Modal Backdrop */
        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(2px);
        }

        /* --- MARIO COIN ANIMATIONS --- */
        .mario-font { font-family: 'Press Start 2P', cursive; }
        
        @keyframes blockBump {
            0% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
            100% { transform: translateY(0); }
        }
        
        @keyframes coinPop {
            0% { transform: translateY(0) rotateY(0); opacity: 0; }
            10% { opacity: 1; }
            50% { transform: translateY(-120px) rotateY(360deg) scale(1.2); }
            80% { opacity: 1; }
            100% { transform: translateY(-140px) rotateY(720deg) scale(1); opacity: 0; }
        }

        @keyframes scoreFloat {
            0% { opacity: 0; transform: translateY(-80px); }
            50% { opacity: 1; transform: translateY(-100px); }
            100% { opacity: 0; transform: translateY(-120px); }
        }

        /* Updated animations to trigger on class add without delay */
        .anim-block { animation: blockBump 0.2s ease-out; }
        .anim-coin { animation: coinPop 0.6s ease-out forwards; }
        .anim-score { animation: scoreFloat 0.8s ease-out 0.2s forwards; }

        .pixel-corners {
            image-rendering: pixelated;
            box-shadow: 
                -4px 0 0 0 #000,
                4px 0 0 0 #000,
                0 -4px 0 0 #000,
                0 4px 0 0 #000;
        }

        /* Calendar Styles */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
        }
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 0.9rem;
            position: relative;
        }
        .calendar-dot {
            width: 4px;
            height: 4px;
            background-color: #3b82f6;
            border-radius: 50%;
            margin-top: 2px;
        }
        
        /* Speaker Avatar */
        .speaker-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: #6b7280;
            border: 2px solid #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef } = React;

        // --- DATA ---
        const createDate = (day, hour, minute) => new Date(2025, 10, day, hour, minute);

        // Speaker Database
        const speakerDB = {
            'S1': { 
                id: 'S1', 
                name: 'Engr. Alberto R. Herrera Jr.', 
                creds: 'PEE, ASEAN Engr.', 
                role: '2025 National President',
                bio: 'The 2025 National President of the Institute of Integrated Electrical Engineers of the Philippines (IIEE). Leading the organization during its milestone 50th year "Golden Legacy". Focused on Integrity, Innovation, Empowerment, and Excellence.'
            },
            'S2': { 
                id: 'S2', 
                name: 'Engr. Franz Xyrlo I. Tobias', 
                creds: 'PEE', 
                role: 'App Developer & Tech Consultant',
                bio: 'Professional Electrical Engineer and the developer of this IIEE Convention App. A passionate advocate for digital transformation in the engineering field and modernizing technical conferences.'
            },
            'S3': { 
                id: 'S3', 
                name: 'Engr. Cleofe T. Caidic', 
                creds: 'PEE, REE', 
                role: 'VP for Technical Affairs',
                bio: 'Serving as the 2025 Vice President for Technical Affairs. Spearheading the technical advancements, standardization efforts, and continuing professional education programs for the institute.'
            },
            'S4': { 
                id: 'S4', 
                name: 'Engr. Adrian L. Rey', 
                creds: 'PEE', 
                role: 'VP for External Affairs',
                bio: 'The 2025 Vice President for External Affairs. Responsible for strengthening partnerships with government agencies, international organizations, and industry stakeholders.'
            },
            'S5': { 
                id: 'S5', 
                name: 'Engr. Robert U. Mabulay', 
                creds: 'PEE', 
                role: 'VP for Internal Affairs',
                bio: 'The 2025 Vice President for Internal Affairs, overseeing chapter operations and membership welfare across the national organization.'
            },
            
            // --- NOV 24 STANDARDS COMMITTEE FORUM SPEAKERS ---
            'N24-1': { id: 'N24-1', name: 'Dir. Neil P. Catajay', creds: '', role: 'Director, DTI-BPS', bio: 'Topic: Role of Local Standards to Nation Building.' },
            'N24-2': { id: 'N24-2', name: 'Engr. Ferdinand B. Binondo', creds: '', role: 'Chief, Solar Energy Management (DOE)', bio: 'Topic: Transitioning to Renewable Energy: Clean Energy Promotes Energy Security.' },
            'N24-3': { id: 'N24-3', name: 'Engr. Jayson G. Corpuz', creds: '', role: 'Division Chief, ERC', bio: 'Topic: Philippine Energy Plan and Renewable Energy Regulatory Frameworks.' },
            'N24-4': { id: 'N24-4', name: 'Engr. Rey Kindar V. Cale', creds: '', role: 'AVP for Development', bio: 'Topic: Integrated Renewable Energy and Energy Storage (IRESS) 101.' },
            'N24-5': { id: 'N24-5', name: 'Engr. Raul C. Balogal', creds: '', role: 'Officer, MERALCO', bio: 'Topic: The Role of Standards in Powering the Energy Transition.' },
            'N24-6': { id: 'N24-6', name: 'Engr. Charles L. Singson', creds: '', role: 'AVP, SM EDD', bio: 'Topic: Guide for Rooftop Solar PV System (Building Installation).' },
            'N24-7': { id: 'N24-7', name: 'Engr. Laurenne E. Dungca', creds: '', role: 'Senior BD Manager, Cargill', bio: 'Topic: Driving Decarbonization of Power Transmission with Natural Ester Transformers.' },
            'N24-8': { id: 'N24-8', name: 'Mr. Colin Steley', creds: '', role: 'COO, Stratcon', bio: 'Topic: Advanced smart power monitoring benefits under Republic Acts.' },
            'N24-9': { id: 'N24-9', name: 'Mr. Paul Loke', creds: '', role: 'Convenor, IEC TC64 WG43', bio: 'Topic: The New Energy Landscape.' },
            'N24-10': { id: 'N24-10', name: 'Ms. Sherry He', creds: '', role: 'Regional Director, TBEA', bio: 'Topic: Introduction of TBEA.' },
            'N24-11': { id: 'N24-11', name: 'Engr. Tristan Daniel C. Zabala', creds: '', role: 'Senior Supervisor, NGCP', bio: 'Topic: Comprehensive Optimization of Synchronous Static Compensator.' },
            'N24-12': { id: 'N24-12', name: 'Engr. Ronmar Gonzales', creds: '', role: 'President, Total Solar', bio: 'Topic: Safety Guidelines of Solar Installation in Commercial Establishment.' },
            'N24-13': { id: 'N24-13', name: 'Engr. Conrado C. Binondo', creds: '', role: 'Chairman, IIEE Standards', bio: 'Topic: Hybrid Power Plants - Power Management System (PMS).' },

            // --- NOV 25 TECHNOLOGY TRENDS SPEAKERS ---
            'N25-T1': { id: 'N25-T1', name: 'Fsinsp Darwin D. Orsolino', creds: '', role: 'BFP Speaker', bio: 'Topic: BFP Procedures and Guidelines for Issuing FSEC, FSIC.' },
            'N25-T2': { id: 'N25-T2', name: 'Engr. Adrian L. Ley', creds: '', role: 'Technical Speaker', bio: 'Topic: Workshop on Hybrid Power System Optimization Using HOMER Software.' },
            'N25-T3': { id: 'N25-T3', name: 'Dr. Juergen Unfried', creds: 'PhD', role: 'Technical Speaker', bio: 'Topic: Energy and Power Efficiency in European Industry.' },
            'N25-T4': { id: 'N25-T4', name: 'Atty. April Domingo', creds: '', role: 'Speaker', bio: 'Topic: Suppliers Perspective on Competitive Market.' },
            'N25-T5': { id: 'N25-T5', name: 'Engr. Patrick Sean Pineda', creds: '', role: 'Technical Speaker', bio: 'Topic: Electrical Safety.' },
            'N25-T6': { id: 'N25-T6', name: 'Mr. Nabaroon Goswami', creds: '', role: 'Technical Speaker', bio: 'Topic: Advanced Lightning Protection Technology Introduction.' },

            // --- NOV 25 EE EDUCATION & SAFETY SPEAKERS ---
            'N25-E1': { id: 'N25-E1', name: 'Dr. Romano Q. Neyra', creds: 'PEE', role: 'Technical Speaker', bio: 'Topic: Development of Framework for Embedding Safety Practices in Electrical System Curriculums.' },
            'N25-E2': { id: 'N25-E2', name: 'Engr. Ryan Anthony K. Umali', creds: 'PEE', role: 'Technical Speaker', bio: 'Topic: Electrical Design for Classified Location as per PEC Ch. 5.' },
            'N25-E3': { id: 'N25-E3', name: 'Engr. Erwin J. Salvador', creds: 'PEE', role: 'Technical Speaker', bio: 'Topic: Bridging the Gap Between Academia and Industry.' },
            'N25-E4': { id: 'N25-E4', name: 'Engr. Analyn C. Fernandez', creds: 'PEE', role: 'Safety Committee', bio: 'Topic: HIRAC Basic Tool to Electrical Safety.' },

            // --- NOV 25 PEC UPDATES ---
            'N25-1': { id: 'N25-1', name: 'Engr. Generoso G. Restubog', creds: 'PEE', role: 'Technical Speaker', bio: 'Presenting on "Introduction to IIEE Guidelines for Electrical System Maintenance and Testing of Equipment".' },
            'N25-2': { id: 'N25-2', name: 'Engr. Reynaldo R. Santiago', creds: 'PEE', role: 'Technical Speaker', bio: 'Presenting on "Philippine Electrical Code 10th Edition Updates".' },
            'N25-3': { id: 'N25-3', name: 'Engr. Jeffrey I. Calderon', creds: 'PEE', role: 'Technical Speaker', bio: 'Presenting on "Grid Forming Inverters".' },

            // --- NOV 26 RME SESSIONS ---
            'N26-R1': { id: 'N26-R1', name: 'Engr. Iñigo V. Escopete Jr.', creds: 'PEE', role: 'RME Session Speaker', bio: 'Expert on Thermal Imaging.' },
            'N26-R2': { id: 'N26-R2', name: 'Engr. Ray Anthony V. Rodriguez', creds: 'PEE', role: 'RME Session Speaker', bio: 'Topic: Smart Prompts, Smart Practice: Leveraging AI for Electricians to Use the PEC 2017.' },
            'N26-R3': { id: 'N26-R3', name: 'Engr. Marvin A. Radaza', creds: 'PEE', role: 'RME Session Speaker', bio: 'Topic: Motor Control.' },
            'N26-R4': { id: 'N26-R4', name: 'Engr. Roel M. Bebero', creds: 'PEE', role: 'RME Session Speaker', bio: 'Topic: Solar PV System.' },
            'N26-R5': { id: 'N26-R5', name: 'Engr. Armando R. Diaz', creds: 'PEE', role: 'RME Session Speaker', bio: 'Topic: Grounding and Bonding with 400 Volt System.' },

            // --- NOV 26 SAFETY CONFERENCE ---
            'N26-S1': { id: 'N26-S1', name: 'Engr. Jose Maria S. Batino', creds: 'CESO IV', role: 'Guest Speaker', bio: 'Executive Director, OSHC - DOLE.' },
            'N26-S3': { id: 'N26-S3', name: 'Engr. Edwin C. Mejia', creds: 'PEE', role: 'Safety Speaker', bio: 'Topic: Electric Vehicle Fire Safety Challenges and Solution.' },
            'N26-S5': { id: 'N26-S5', name: 'Engr. Victorino C. Abejero', creds: 'PEE', role: 'Safety Speaker', bio: 'Topic: Electrical Product Safety.' },
            'N26-S6': { id: 'N26-S6', name: 'Engr. Arben F. Gumboc', creds: 'PEE', role: 'Safety Speaker', bio: 'Topic: Fall Protection Systems for Work-at-Heights.' },
            'N26-S7': { id: 'N26-S7', name: 'Mr. Sulaiman Mohamed', creds: '', role: 'Safety Speaker', bio: 'Topic: Industrial Safety Awareness.' },
            'N26-S8': { id: 'N26-S8', name: 'Engr. Juan Paolo M. Tolentino', creds: 'PEE', role: 'Safety Speaker', bio: 'Topic: Advancements in Electrical Preventive Maintenance.' },

            // --- NOV 26 TECH TRENDS ---
            'N26-T1': { id: 'N26-T1', name: 'Engr. Michael M. Evangelista', creds: 'PEE', role: 'Technical Speaker', bio: 'Topic: Transformer Insulation Testing.' },
            'N26-T2': { id: 'N26-T2', name: 'Engr. Rodolfo Peñalosa', creds: 'PEE', role: 'Technical Speaker', bio: 'Topic: Electro-Mechanical Systems Energy Efficiency Affects.' },

            // --- NOV 27 BRIDGING STANDARDS ---
            'N27-S1': { id: 'N27-S1', name: 'Mr. Jo Cops', creds: '', role: 'Keynote Speaker', bio: 'Keynote Speaker: Bridging Local and International Standards.' },
            'N27-S2': { id: 'N27-S2', name: 'Dir. Neil P. Catajay', creds: '', role: 'Forum Speaker', bio: 'Speaker: Bridging Standards Forum.' },
            'N27-S3': { id: 'N27-S3', name: 'Mr. Damien Lee', creds: '', role: 'Forum Speaker', bio: 'Speaker: Bridging Standards Forum.' },
            'N27-S4': { id: 'N27-S4', name: 'Dr. George Borlase', creds: '', role: 'Forum Speaker', bio: 'Speaker: Bridging Standards Forum.' },
            'N27-S5': { id: 'N27-S5', name: 'Mr. Kolin Low', creds: '', role: 'Forum Speaker', bio: 'Speaker: Bridging Standards Forum.' },

            // --- NOV 29 AAPER FORUM ---
            'N29-A1': { id: 'N29-A1', name: 'Engr. Florencio D. Berenguel', creds: 'PEE', role: 'AAPER Committee', bio: 'Welcome & Opening Remarks.' },
            'N29-A2': { id: 'N29-A2', name: 'Engr. Sheila C. Cabaraban', creds: '', role: 'Guest Speaker', bio: 'President & CEO, Philippine National Oil Company.' },
            'N29-A3': { id: 'N29-A3', name: 'Ir. Simon Yeong Chin Chow', creds: '', role: 'AER Head Commissioner', bio: 'Topic: ASEAN Mobility & Beyond.' },
            'N29-A4': { id: 'N29-A4', name: 'Engr. Federico A. Monsada', creds: '', role: 'Pres. Phil. Tech. Council', bio: 'Topic: Transformations in Engineering Education and Practice.' },
            'N29-A5': { id: 'N29-A5', name: 'Engr. Romulo R. Agatep', creds: '', role: 'Speaker', bio: 'Topic: Engineering Mobility: Empowering Global Opportunities.' },
            'N29-A6': { id: 'N29-A6', name: 'Engr. Nelson S. Andres', creds: '', role: 'Speaker', bio: 'Topic: Navigating the Registration Process.' },
            'N29-A7': { id: 'N29-A7', name: 'Dr. Edison E. Mojica', creds: '', role: 'Speaker', bio: 'Topic: Advanced Level Engineer: Insights from the Academe.' },
            
            // RME Forum Speakers (Nov 29 - previously added)
            'TS11': { id: 'TS11', name: 'Engr. Arthur N. Escalante', creds: 'PEE', role: 'RME Forum Speaker', bio: 'Advocate for Electrician Entrepreneurship. Presenting on "Empowering Electricians to Become Contractors".' },
            'TS13': { id: 'TS13', name: 'Engr. Christopher T. Bellaflor', creds: 'PEE', role: 'RME Forum Speaker', bio: 'Energy Efficiency Expert. Presenting on "RA 11285" (Energy Efficiency and Conservation Act).' },
            'TS14': { id: 'TS14', name: 'Engr. Riz T. Bautista', creds: 'PEE', role: 'RME Forum Speaker', bio: 'TESDA Accreditation Specialist. Presenting on "How to Acquire NC II and How to Become a TESDA Accredited Assessor".' },
            'TS15': { id: 'TS15', name: 'Hon. Francis V. Mapile', creds: 'PEE', role: 'RME Forum Speaker', bio: 'Member, Board of Electrical Engineering. Presenting on "RA 7920" and Career Progression Guidelines.' },
            
            // Technical Speakers (Nov 27-29)
            'N27-1': { id: 'N27-1', name: 'Engr. Emiere Daplin Lingatog', creds: 'PEE', role: 'Technical Speaker', bio: 'Presenting on Load Forecasting and Renewable Energy Integration.' },
            'N27-2': { id: 'N27-2', name: 'Engr. Anderson S. Ongspying', creds: 'PEE', role: 'Technical Speaker', bio: 'Presenting on the Customer Choice Program.' },
            'N27-3': { id: 'N27-3', name: 'Hon. Jaime V. Mendoza', creds: 'PEE', role: 'BEE Member', bio: 'Member, Board of Electrical Engineering. Expert on Power Line Corridors.' },
            'N27-4': { id: 'N27-4', name: 'Engr. Roel B. Calano', creds: 'PEE', role: 'Technical Speaker', bio: 'Presenting on The Principle of Least Action in Control of Power Generation.' },
            'N28-1': { id: 'N28-1', name: 'Engr. Jerome M. Peralta', creds: 'PEE', role: 'Technical Speaker', bio: 'Presenting on Interconnection Protection of Embedded Generation.' },
            'N28-2': { id: 'N28-2', name: 'Engr. Frederick R. Calamlam', creds: 'PEE', role: 'Technical Speaker', bio: 'Presenting on the Iberian Blackout.' },
            'N28-3': { id: 'N28-3', name: 'Engr. Amelia L. Cumpas', creds: 'PEE', role: 'Technical Speaker', bio: 'Presenting on High Voltage Utility & Regulatory Grade Revenue Metering Systems.' },
            'N28-4': { id: 'N28-4', name: 'Mr. Erel Narida', creds: '', role: 'Keynote Speaker', bio: 'Keynote Speaker for the Renewable Energy Forum.' },
            'N28-5': { id: 'N28-5', name: 'Ms. Chester Ann Yap', creds: '', role: 'Technical Speaker', bio: 'Speaker at the Renewable Energy Forum.' },
            'N28-6': { id: 'N28-6', name: 'Ms. Joyce Anne Asilo', creds: '', role: 'Technical Speaker', bio: 'Speaker at the Renewable Energy Forum.' },
            'N28-7': { id: 'N28-7', name: 'Mr. Nilo A. Apuada', creds: '', role: 'Technical Speaker', bio: 'Speaker at the Renewable Energy Forum.' },
            'N29-2': { id: 'N29-2', name: 'Ms. Catherine Jalandoni', creds: '', role: 'Keynote Speaker', bio: 'Keynote Speaker for the Artificial Intelligence Forum.' },
            'N29-3': { id: 'N29-3', name: 'Dr. Michael Pacis', creds: 'PhD', role: 'Technical Speaker', bio: 'Expert Speaker on AI Technical Innovation.' },
            'N29-4': { id: 'N29-4', name: 'Mr. Min Chih Tsai', creds: '', role: 'Technical Speaker', bio: 'Expert Speaker on AI Technical Innovation.' },
            'N29-5': { id: 'N29-5', name: 'Engr. Ronnie L. Aperocho', creds: 'PEE', role: 'Keynote Speaker', bio: 'Keynote Speaker for the Power Utilities Forum.' },
            'N29-6': { id: 'N29-6', name: 'Engr. Giovanni Randolfo A. Galang', creds: 'PEE', role: 'Technical Speaker', bio: 'Speaker for Power Utilities Forum.' },
            'N29-7': { id: 'N29-7', name: 'Mr. Patrick Aquino', creds: '', role: 'Technical Speaker', bio: 'Speaker for Power Utilities Forum.' },
            'N29-8': { id: 'N29-8', name: 'Engr. Ferdinand P. Villareal', creds: 'PEE', role: 'Technical Speaker', bio: 'Speaker for Power Utilities Forum.' },
            'TS1': { id: 'TS1', name: 'Engr. George D. Esteban', creds: 'PEE', role: 'Technical Speaker', bio: 'Expert in Project Management.' },
            'TS2': { id: 'TS2', name: 'Engr. Allan Jay L. Baco', creds: 'PEE', role: 'Technical Speaker', bio: 'Specialist in Distribution Utilities.' },
            'TS3': { id: 'TS3', name: 'Engr. Orville R. Singson', creds: 'PEE', role: 'Technical Speaker', bio: 'Expert in High Rise Building Design.' },
            'TS4': { id: 'TS4', name: 'Engr. Christian L. Agustin', creds: 'PEE', role: 'Technical Speaker', bio: 'Specialist in Utility Protection.' },
            'TS5': { id: 'TS5', name: 'Dir. Andrew Mui', creds: '', role: 'Technical Speaker', bio: 'Expert in Lightning Protection.' },
            'TS6': { id: 'TS6', name: 'Dr. Bhaba Das', creds: 'PhD', role: 'Technical Speaker', bio: 'Expert in Transformer Condition Monitoring.' }
        };

        const scheduleData = [
            // --- NOV 24 (MONDAY) ---
            { id: 101, dateStr: '2025-11-24', day: 24, startH: 8, startM: 0, endH: 17, endM: 0, timeDisplay: '8:00 AM - 5:00 PM', title: "Standards Committee Forum", venue: 'Meeting Rooms 7 & 8', type: 'forum', dayName: 'Mon', speakerId: 'N24-1' },
            { id: 102, dateStr: '2025-11-24', day: 24, startH: 8, startM: 0, endH: 17, endM: 0, timeDisplay: '8:00 AM - 5:00 PM', title: 'RME Skills Olympics', venue: 'Function Room 3', type: 'competition', dayName: 'Mon' },
            { id: 104, dateStr: '2025-11-24', day: 24, startH: 8, startM: 0, endH: 17, endM: 0, timeDisplay: '8:00 AM - 5:00 PM', title: 'Releasing of Kits', venue: 'Meeting Rooms 4, 5 & 6', type: 'admin', dayName: 'Mon' },

            // --- NOV 25 (TUESDAY) ---
            { id: 201, dateStr: '2025-11-25', day: 25, startH: 8, startM: 0, endH: 17, endM: 0, timeDisplay: '8:00 AM - 5:00 PM', title: "Technology Trends in EE", venue: 'Function Room 3', type: 'technical', dayName: 'Tue', speakerId: 'N25-T1' },
            { id: 202, dateStr: '2025-11-25', day: 25, startH: 8, startM: 0, endH: 17, endM: 0, timeDisplay: '8:00 AM - 5:00 PM', title: 'EE Education & Safety Research', venue: 'Meeting Rooms 4-6', type: 'technical', dayName: 'Tue', speakerId: 'N25-E1' },
            { id: 203, dateStr: '2025-11-25', day: 25, startH: 8, startM: 0, endH: 17, endM: 0, timeDisplay: '8:00 AM - 5:00 PM', title: 'Harmonized Electrical Practices (PEC)', venue: 'Meeting Rooms 7 & 8', type: 'technical', dayName: 'Tue', speakerId: 'N25-2' },

            // --- NOV 26 (WEDNESDAY) ---
            { id: 301, dateStr: '2025-11-26', day: 26, startH: 8, startM: 0, endH: 17, endM: 0, timeDisplay: '8:00 AM - 5:00 PM', title: "RME Technical Sessions", venue: 'Meeting Rooms 7 & 8', type: 'technical', dayName: 'Wed', speakerId: 'N26-R1' },
            { id: 302, dateStr: '2025-11-26', day: 26, startH: 8, startM: 0, endH: 17, endM: 0, timeDisplay: '8:00 AM - 5:00 PM', title: 'Technology Trends: Innovations', venue: 'Function Room 3', type: 'technical', dayName: 'Wed', speakerId: 'N26-T1' },
            { id: 303, dateStr: '2025-11-26', day: 26, startH: 8, startM: 0, endH: 17, endM: 0, timeDisplay: '8:00 AM - 5:00 PM', title: 'Electrical Safety Conference', venue: 'Meeting Rooms 4-6', type: 'technical', dayName: 'Wed', speakerId: 'N26-S2' },
            { id: 307, dateStr: '2025-11-26', day: 26, startH: 8, startM: 0, endH: 18, endM: 0, timeDisplay: '8:00 AM - 6:00 PM', title: 'IIEE WEN Forum', venue: 'Exhibit Area', type: 'forum', dayName: 'Wed' },

            // --- NOV 27 (THURSDAY) ---
            { id: 401, dateStr: '2025-11-27', day: 27, startH: 8, startM: 30, endH: 11, endM: 30, timeDisplay: '8:30 AM - 11:30 AM', title: 'Opening Ceremonies', venue: 'Function Rooms 1-4', type: 'plenary', dayName: 'Thu', speakerId: 'S1' },
            
            // Nov 27 PM
            { id: 402, dateStr: '2025-11-27', day: 27, startH: 13, startM: 30, endH: 17, endM: 0, timeDisplay: '1:30 PM - 5:00 PM', title: 'Load Forecasting & Renewable Energy', venue: 'Function Room 1', type: 'technical', dayName: 'Thu', speakerId: 'N27-1' },
            { id: 404, dateStr: '2025-11-27', day: 27, startH: 13, startM: 0, endH: 17, endM: 0, timeDisplay: '1:00 PM - 5:00 PM', title: 'Bridging Standards Forum', venue: 'Function Room 1', type: 'forum', dayName: 'Thu', speakerId: 'N27-S1' },
            { id: 406, dateStr: '2025-11-27', day: 27, startH: 13, startM: 30, endH: 17, endM: 0, timeDisplay: '1:30 PM - 5:00 PM', title: 'Power Line Corridor', venue: 'Function Room 2', type: 'technical', dayName: 'Thu', speakerId: 'N27-3' },
            { id: 408, dateStr: '2025-11-27', day: 27, startH: 13, startM: 30, endH: 17, endM: 0, timeDisplay: '1:30 PM - 5:00 PM', title: 'Career Progression (Res. 14)', venue: 'Function Room 3', type: 'technical', dayName: 'Thu', speakerId: 'TS15' },

            // --- NOV 28 (FRIDAY) ---
            { id: 501, dateStr: '2025-11-28', day: 28, startH: 8, startM: 0, endH: 15, endM: 0, timeDisplay: '8:00 AM - 3:00 PM', title: 'Interconnection Protection', venue: 'Function Room 1', type: 'technical', dayName: 'Fri', speakerId: 'N28-1' },
            { id: 504, dateStr: '2025-11-28', day: 28, startH: 8, startM: 0, endH: 15, endM: 0, timeDisplay: '8:00 AM - 3:00 PM', title: 'Protection Coordination', venue: 'Function Room 2', type: 'technical', dayName: 'Fri', speakerId: 'TS4' },
            { id: 507, dateStr: '2025-11-28', day: 28, startH: 8, startM: 0, endH: 15, endM: 0, timeDisplay: '8:00 AM - 3:00 PM', title: 'Project Management', venue: 'Function Room 3', type: 'technical', dayName: 'Fri', speakerId: 'TS1' },
            { id: 510, dateStr: '2025-11-28', day: 28, startH: 9, startM: 30, endH: 12, endM: 0, timeDisplay: '9:30 AM - 12:00 NN', title: 'Renewable Energy Forum', venue: 'Function Room 4', type: 'forum', dayName: 'Fri', speakerId: 'N28-4' },

            // --- NOV 29 (SATURDAY) ---
            { id: 601, dateStr: '2025-11-29', day: 29, startH: 8, startM: 30, endH: 10, endM: 30, timeDisplay: '8:30 AM - 10:30 AM', title: 'AI Forum', venue: 'Function Room 4', type: 'forum', dayName: 'Sat', speakerId: 'N29-1' },
            { id: 604, dateStr: '2025-11-29', day: 29, startH: 10, startM: 30, endH: 12, endM: 0, timeDisplay: '10:30 AM - 12:00 NN', title: 'Power Utilities Forum', venue: 'Function Room 4', type: 'forum', dayName: 'Sat', speakerId: 'N29-5' },
            { id: 606, dateStr: '2025-11-29', day: 29, startH: 8, startM: 0, endH: 12, endM: 0, timeDisplay: '8:00 AM - 12:00 NN', title: 'RME Forum', venue: 'Function Room 3', type: 'forum', dayName: 'Sat', speakerId: 'TS11' },
            { id: 611, dateStr: '2025-11-29', day: 29, startH: 8, startM: 0, endH: 17, endM: 0, timeDisplay: '8:00 AM - 5:00 PM', title: 'Energized Regional Growth (AAPER)', venue: 'Meeting Room 7-8', type: 'forum', dayName: 'Sat', speakerId: 'N29-A2' },
            { id: 610, dateStr: '2025-11-29', day: 29, startH: 16, startM: 30, endH: 20, endM: 0, timeDisplay: '4:30 PM - 8:00 PM', title: 'Closing Ceremonies', venue: 'Function Rooms 1-4', type: 'plenary', dayName: 'Sat', speakerId: 'S1' },
        ];

        const venueData = [
            {
                category: 'Hotels',
                items: [
                    { name: "Conrad Manila", dist: "0.2 km", desc: "Luxury 5-star linked to SMX.", map: "https://goo.gl/maps/ConradManila" },
                    { name: "Microtel by Wyndham", dist: "0.3 km", desc: "Convenient stay.", map: "https://goo.gl/maps/MicrotelMOA" },
                    { name: "Hotel 101 Manila", dist: "0.8 km", desc: "Business hotel.", map: "https://goo.gl/maps/Hotel101" }
                ]
            },
            {
                category: 'Food',
                items: [
                    { name: "SM Mall of Asia", dist: "0.5 km", desc: "Hundreds of options.", map: "https://goo.gl/maps/MOA" },
                    { name: "IKEA Restaurant", dist: "0.6 km", desc: "Affordable meals.", map: "https://goo.gl/maps/IKEA" },
                    { name: "Vikings Buffet", dist: "1.2 km", desc: "Luxury buffet.", map: "https://goo.gl/maps/Vikings" }
                ]
            }
        ];

        // --- COMPONENTS ---

        function SplashScreen({ onComplete }) {
            const [isAnimating, setIsAnimating] = useState(false);
            const [hasStarted, setHasStarted] = useState(false);

            const playCoinSound = () => {
                try {
                    const AudioContext = window.AudioContext || window.webkitAudioContext;
                    if (!AudioContext) return;
                    
                    const ctx = new AudioContext();
                    const osc = ctx.createOscillator();
                    const gain = ctx.createGain();

                    osc.connect(gain);
                    gain.connect(ctx.destination);

                    osc.type = 'square';
                    osc.frequency.setValueAtTime(988, ctx.currentTime);
                    osc.frequency.setValueAtTime(1319, ctx.currentTime + 0.08);

                    gain.gain.setValueAtTime(0.05, ctx.currentTime);
                    gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.5);

                    osc.start(ctx.currentTime);
                    osc.stop(ctx.currentTime + 0.5);
                } catch (e) {
                    console.error("Audio play failed", e);
                }
            };

            const handleStart = () => {
                if (hasStarted) return;
                setHasStarted(true);
                setIsAnimating(true);
                playCoinSound();
                setTimeout(() => { onComplete(); }, 1500); 
            };

            return (
                <div onClick={handleStart} className="fixed inset-0 z-[100] bg-blue-900 flex flex-col items-center justify-center overflow-hidden cursor-pointer">
                    <div className="relative flex flex-col items-center justify-end h-64 w-full mb-8">
                        {isAnimating && (
                            <>
                                <div className="absolute w-12 h-12 bg-yellow-400 rounded-full border-4 border-yellow-200 flex items-center justify-center shadow-lg anim-coin z-10">
                                    <span className="mario-font text-yellow-700 font-bold text-xs">50</span>
                                </div>
                                <div className="absolute mario-font text-white text-sm anim-score z-20">50th</div>
                            </>
                        )}
                        <div className={`w-16 h-16 bg-yellow-500 rounded-lg border-b-4 border-r-4 border-yellow-700 relative z-0 flex items-center justify-center pixel-corners shadow-xl ${isAnimating ? 'anim-block' : 'animate-bounce'}`}>
                            <div className="absolute top-1 left-1 w-2 h-2 bg-yellow-200 rounded-full opacity-50"></div>
                            <span className="mario-font text-yellow-800 text-3xl font-bold">?</span>
                            <div className="absolute inset-0 border-2 border-yellow-600 opacity-20 rounded-lg"></div>
                        </div>
                    </div>
                    <div className={`text-center transition-opacity duration-500 ${isAnimating ? 'opacity-0' : 'opacity-100'}`}>
                        <h1 className="text-white text-2xl font-bold mb-2">IIEE 50th</h1>
                        <p className="text-yellow-300 text-xs tracking-widest mario-font animate-pulse">TAP TO START</p>
                    </div>
                </div>
            );
        }

        function App() {
            const [isLoading, setIsLoading] = useState(true);
            const [view, setView] = useState('schedule');
            const [subTab, setSubTab] = useState('ALL');
            const [simTime, setSimTime] = useState(new Date(2025, 10, 28, 9, 0));
            const [searchQuery, setSearchQuery] = useState('');
            
            // Calendar State
            const [calSelectedDateStr, setCalSelectedDateStr] = useState('2025-11-24');

            const [myAgenda, setMyAgenda] = useState(() => {
                const saved = localStorage.getItem('myAgenda');
                return saved ? JSON.parse(saved) : [];
            });
            const [myNotes, setMyNotes] = useState(() => {
                const saved = localStorage.getItem('myNotes');
                return saved ? JSON.parse(saved) : {};
            });

            // Persist Agenda & Notes
            useEffect(() => { localStorage.setItem('myAgenda', JSON.stringify(myAgenda)); }, [myAgenda]);
            useEffect(() => { localStorage.setItem('myNotes', JSON.stringify(myNotes)); }, [myNotes]);

            // --- NOTE MODAL STATE ---
            const [showNoteModal, setShowNoteModal] = useState(false);
            const [activeNoteId, setActiveNoteId] = useState(null);
            const [tempNoteText, setTempNoteText] = useState('');
            const noteInputRef = useRef(null);

            // --- SPEAKER MODAL STATE ---
            const [showSpeakerModal, setShowSpeakerModal] = useState(false);
            const [activeSpeaker, setActiveSpeaker] = useState(null);

            const toggleAgenda = (id) => {
                if (myAgenda.includes(id)) {
                    setMyAgenda(myAgenda.filter(itemId => itemId !== id));
                } else {
                    setMyAgenda([...myAgenda, id]);
                }
            };

            // --- HANDLERS ---
            const openNoteModal = (e, eventId) => {
                e.stopPropagation();
                setActiveNoteId(eventId);
                setTempNoteText(myNotes[eventId] || '');
                setShowNoteModal(true);
                setTimeout(() => { if (noteInputRef.current) noteInputRef.current.focus(); }, 100);
            };

            const saveNote = () => {
                const trimmed = tempNoteText.trim();
                setMyNotes(prev => {
                    const next = { ...prev };
                    if (trimmed) next[activeNoteId] = trimmed;
                    else delete next[activeNoteId];
                    return next;
                });
                setShowNoteModal(false);
            };

            const openSpeakerModal = (e, speakerId) => {
                e.stopPropagation();
                const spk = speakerDB[speakerId];
                if(spk) {
                    setActiveSpeaker(spk);
                    setShowSpeakerModal(true);
                }
            };

            // --- TIME SIMULATION ---
            const adjustTime = (amount, unit) => {
                const newTime = new Date(simTime);
                if (unit === 'D') newTime.setDate(newTime.getDate() + amount);
                if (unit === 'H') newTime.setHours(newTime.getHours() + amount);
                setSimTime(newTime);
            };

            const formatSimTime = (date) => {
                const day = date.getDate();
                const hours = date.getHours();
                const minutes = date.getMinutes();
                const ampm = hours >= 12 ? 'PM' : 'AM';
                const formattedHours = hours % 12 || 12;
                const formattedMinutes = minutes < 10 ? '0' + minutes : minutes;
                const getOrdinal = (n) => {
                    const s = ["th", "st", "nd", "rd"];
                    const v = n % 100;
                    return n + (s[(v - 20) % 10] || s[v] || s[0]);
                };
                return `${formattedHours}:${formattedMinutes} ${ampm} (${getOrdinal(day)})`;
            };

            // --- FILTER LOGIC ---
            const filteredEvents = useMemo(() => {
                let events = scheduleData.filter(e => 
                    e.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                    e.venue.toLowerCase().includes(searchQuery.toLowerCase())
                );

                if (subTab === 'MY AGENDA') {
                    events = events.filter(e => myAgenda.includes(e.id));
                } else if (subTab === 'NOW') {
                    events = events.filter(e => {
                        const start = createDate(e.day, e.startH, e.startM);
                        const end = createDate(e.day, e.endH, e.endM);
                        return simTime >= start && simTime <= end;
                    });
                } else if (subTab === 'SOON') {
                    events = events.filter(e => {
                        const start = createDate(e.day, e.startH, e.startM);
                        const twoHoursLater = new Date(simTime.getTime() + (2 * 60 * 60 * 1000));
                        return start > simTime && start <= twoHoursLater;
                    });
                }
                
                events.sort((a,b) => {
                    if (a.day !== b.day) return a.day - b.day;
                    return a.startH - b.startH;
                });

                return events;
            }, [searchQuery, subTab, myAgenda, simTime]);

            const renderEventCard = (event) => {
                const hasNote = !!myNotes[event.id];
                const speaker = event.speakerId ? speakerDB[event.speakerId] : null;

                return (
                    <div key={event.id} className="bg-white rounded-lg p-4 shadow-sm mb-3 event-card relative animate-fade-in">
                        <div className="pr-8">
                            <div className="text-blue-900 font-bold text-sm mb-1">
                                {event.timeDisplay}
                            </div>
                            <h3 className="text-lg font-bold text-gray-800 leading-tight mb-2">{event.title}</h3>
                            <div className="flex items-center text-gray-500 text-sm mb-1">
                                <i className="fas fa-map-marker-alt w-4 text-center mr-2 text-gray-400"></i>
                                {event.venue}
                            </div>
                            <div className="flex items-center text-gray-500 text-sm mb-2">
                                <i className="fas fa-calendar-day w-4 text-center mr-2 text-gray-400"></i>
                                {event.dayName}, Nov {event.day}
                            </div>

                            {/* Speaker Link */}
                            {speaker && (
                                <div onClick={(e) => openSpeakerModal(e, event.speakerId)} className="inline-flex items-center bg-blue-50 text-blue-700 px-2 py-1 rounded text-xs font-semibold mb-3 cursor-pointer hover:bg-blue-100 transition">
                                    <i className="fas fa-user-tie mr-1.5"></i>
                                    {speaker.name}
                                </div>
                            )}
                            
                            {hasNote && (
                                <div onClick={(e) => openNoteModal(e, event.id)} className="mb-3 bg-yellow-50 border border-yellow-200 p-2 rounded text-sm text-gray-700 italic cursor-pointer hover:bg-yellow-100 transition">
                                    <i className="fas fa-sticky-note text-yellow-500 mr-2"></i>
                                    "{myNotes[event.id]}"
                                </div>
                            )}

                            <div className="flex gap-3 mt-1">
                                <button onClick={(e) => openNoteModal(e, event.id)} className={`flex-1 py-2 rounded-lg text-sm font-semibold transition flex items-center justify-center ${hasNote ? 'bg-blue-100 text-blue-700 hover:bg-blue-200' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}`}>
                                    <i className={`${hasNote ? 'fas' : 'fas'} fa-pen-nib mr-2 text-xs`}></i> 
                                    {hasNote ? 'Edit Note' : 'Note'}
                                </button>
                                <button className="flex-1 bg-gray-100 text-gray-600 py-2 rounded-lg text-sm font-semibold hover:bg-gray-200 transition flex items-center justify-center">
                                    <i className="fas fa-bolt mr-2 text-xs text-yellow-600"></i> 3 CPD
                                </button>
                            </div>
                        </div>
                        <button onClick={() => toggleAgenda(event.id)} className="absolute top-4 right-4 p-2">
                            <i className={`${myAgenda.includes(event.id) ? 'fas text-yellow-400' : 'far text-gray-300'} fa-star text-xl`}></i>
                        </button>
                    </div>
                );
            };

            // --- CALENDAR RENDERER ---
            const CalendarContent = () => {
                const days = Array.from({ length: 30 }, (_, i) => i + 1);
                const blanks = Array.from({ length: 6 }, (_, i) => i);
                const selectedDayEvents = scheduleData.filter(e => e.dateStr === calSelectedDateStr).sort((a,b) => a.startH - b.startH);
                const hasEvents = (day) => {
                    const dStr = `2025-11-${day < 10 ? '0' + day : day}`;
                    return scheduleData.some(e => e.dateStr === dStr);
                };

                return (
                    <div className="animate-fade-in">
                        <div className="bg-white p-4 rounded-xl shadow-sm mb-4">
                            <div className="flex justify-between items-center mb-4">
                                <h2 className="font-bold text-xl text-blue-900">November 2025</h2>
                                <div className="text-gray-400 text-sm">
                                    <i className="fas fa-chevron-left mr-3"></i><i className="fas fa-chevron-right ml-3"></i>
                                </div>
                            </div>
                            <div className="grid grid-cols-7 mb-2 text-center text-xs font-bold text-gray-400 uppercase">
                                <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
                            </div>
                            <div className="calendar-grid">
                                {blanks.map((_, i) => <div key={`blank-${i}`} className="calendar-day"></div>)}
                                {days.map(day => {
                                    const dateStr = `2025-11-${day < 10 ? '0' + day : day}`;
                                    const isSelected = calSelectedDateStr === dateStr;
                                    const isToday = simTime.getDate() === day && simTime.getMonth() === 10;
                                    const eventDot = hasEvents(day);
                                    return (
                                        <div key={day} onClick={() => setCalSelectedDateStr(dateStr)} className={`calendar-day cursor-pointer transition-colors ${isSelected ? 'bg-yellow-400 text-blue-900 font-bold shadow-md' : 'hover:bg-gray-100 text-gray-700'} ${isToday && !isSelected ? 'border-2 border-blue-500' : ''}`}>
                                            <span>{day}</span>
                                            {eventDot && !isSelected && <div className="calendar-dot"></div>}
                                        </div>
                                    );
                                })}
                            </div>
                        </div>
                        <div className="mb-2 flex items-center justify-between px-1">
                            <h3 className="font-bold text-gray-700">Events for Nov {calSelectedDateStr.split('-')[2]}</h3>
                            <span className="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full">{selectedDayEvents.length} Events</span>
                        </div>
                        <div className="space-y-1">
                            {selectedDayEvents.length > 0 ? selectedDayEvents.map(renderEventCard) : (
                                <div className="text-center py-10 text-gray-400 bg-white rounded-lg border border-dashed border-gray-300">
                                    <i className="far fa-calendar-minus text-4xl mb-2 text-gray-200"></i><p>No events scheduled.</p>
                                </div>
                            )}
                        </div>
                    </div>
                );
            };

            const MenuContent = () => (
                <div className="animate-fade-in space-y-4">
                    <div className="bg-white p-4 rounded-lg shadow-sm">
                        <h3 className="font-bold text-gray-800 mb-2">Convention Guide</h3>
                        <div onClick={() => setView('speakers')} className="flex items-center justify-between p-3 bg-blue-50 rounded-lg cursor-pointer hover:bg-blue-100 mb-2">
                             <div className="flex items-center text-blue-800 font-bold">
                                 <div className="w-8 h-8 rounded-full bg-blue-200 flex items-center justify-center mr-3"><i className="fas fa-users"></i></div>
                                 Speaker Directory
                             </div>
                             <i className="fas fa-chevron-right text-blue-300"></i>
                        </div>
                    </div>

                    <div className="bg-white p-4 rounded-lg shadow-sm">
                        <h3 className="font-bold text-gray-800 mb-2">Venue Guide</h3>
                        {venueData.map((cat, i) => (
                            <div key={i} className="mb-4">
                                <h4 className="text-blue-800 font-bold text-sm uppercase tracking-wide mb-2">{cat.category}</h4>
                                <div className="space-y-2">
                                    {cat.items.map((item, idx) => (
                                        <a key={idx} href={item.map} target="_blank" className="block bg-gray-50 p-3 rounded hover:bg-blue-50 transition flex justify-between items-center">
                                            <div>
                                                <div className="font-medium text-gray-800">{item.name}</div>
                                                <div className="text-xs text-gray-500">{item.dist} • {item.desc}</div>
                                            </div>
                                            <i className="fas fa-chevron-right text-gray-300 text-xs"></i>
                                        </a>
                                    ))}
                                </div>
                            </div>
                        ))}
                    </div>
                    <div className="bg-white p-4 rounded-lg shadow-sm">
                        <h3 className="font-bold text-gray-800 mb-2">My Data</h3>
                        <div className="space-y-2">
                             <div className="flex justify-between p-2 bg-gray-50 rounded"><span>Saved Notes</span><span className="font-bold text-blue-600">{Object.keys(myNotes).length}</span></div>
                             <div className="flex justify-between p-2 bg-gray-50 rounded"><span>Agenda Items</span><span className="font-bold text-blue-600">{myAgenda.length}</span></div>
                        </div>
                    </div>
                </div>
            );

            const NotesListView = () => {
                const noteIds = Object.keys(myNotes);
                const getEvent = (id) => scheduleData.find(e => e.id.toString() === id.toString());
                return (
                    <div className="animate-fade-in space-y-4">
                         <h2 className="font-bold text-2xl text-blue-900 mb-2 px-1">My Notes</h2>
                         {noteIds.length === 0 ? (
                            <div className="text-center py-16 text-gray-400 bg-white rounded-xl shadow-sm border border-dashed border-gray-200">
                                <div className="bg-yellow-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4"><i className="fas fa-pen-nib text-2xl text-yellow-600"></i></div>
                                <h3 className="text-gray-600 font-bold mb-1">No Notes Yet</h3><p className="text-sm px-8">Tap "Note" on any event.</p>
                            </div>
                         ) : (
                             <div className="space-y-3">
                                {noteIds.map(id => {
                                    const event = getEvent(id);
                                    if (!event) return null;
                                    return (
                                        <div key={id} onClick={(e) => openNoteModal(e, parseInt(id))} className="bg-white p-4 rounded-xl shadow-sm border-l-4 border-yellow-400 cursor-pointer active:scale-[0.99] transition-transform">
                                            <div className="flex justify-between items-start mb-2">
                                                <h3 className="font-bold text-gray-800 text-sm">{event.title}</h3>
                                                <span className="text-xs text-gray-400 bg-gray-100 px-2 py-0.5 rounded-full">{event.dayName}</span>
                                            </div>
                                            <div className="text-gray-600 text-sm italic bg-yellow-50 p-3 rounded-lg border border-yellow-100">"{myNotes[id]}"</div>
                                            <div className="mt-2 text-right"><span className="text-xs font-bold text-blue-600">Tap to edit</span></div>
                                        </div>
                                    );
                                })}
                             </div>
                         )}
                    </div>
                );
            };

            // NEW: Speaker Directory View
            const SpeakersListView = () => {
                return (
                    <div className="animate-fade-in space-y-4">
                        <div className="flex items-center mb-4">
                            <button onClick={() => setView('menu')} className="mr-3 text-blue-600"><i className="fas fa-arrow-left"></i></button>
                            <h2 className="font-bold text-2xl text-blue-900">Speaker Directory</h2>
                        </div>
                        <div className="grid grid-cols-1 gap-3">
                            {Object.values(speakerDB).map(spk => (
                                <div key={spk.id} onClick={(e) => openSpeakerModal(e, spk.id)} className="bg-white p-4 rounded-xl shadow-sm flex items-center cursor-pointer hover:bg-gray-50 active:scale-95 transition-transform">
                                    <div className="speaker-avatar mr-4 shrink-0">
                                        <span className="font-bold">{spk.name.split(' ')[1][0]}{spk.name.split(' ').pop()[0]}</span>
                                    </div>
                                    <div>
                                        <h3 className="font-bold text-gray-800 text-sm">{spk.name}</h3>
                                        <div className="text-xs text-blue-600 font-medium mb-1">{spk.creds}</div>
                                        <div className="text-xs text-gray-500">{spk.role}</div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                )
            };

            const ScheduleContent = () => (
                <div>
                    <div className="bg-white p-3 rounded-xl shadow-sm mb-4 border border-gray-100 flex items-center">
                         <i className="fas fa-search text-gray-300 mr-3 ml-1"></i>
                        <input type="text" placeholder="Search events..." className="w-full text-gray-700 focus:outline-none bg-transparent" value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)} />
                    </div>
                    {filteredEvents.length === 0 && (
                        <div className="text-center py-16 text-gray-400">
                            <i className="far fa-calendar-times text-5xl mb-4 text-gray-200"></i><p>No events found.</p>
                            {subTab === 'NOW' && <p className="text-xs mt-2">Try adjusting the simulator time above.</p>}
                        </div>
                    )}
                    <div className="space-y-1">{filteredEvents.map(renderEventCard)}</div>
                </div>
            );

            if (isLoading) {
                return <SplashScreen onComplete={() => setIsLoading(false)} />;
            }

            return (
                <div className="app-container flex flex-col">
                    <div className="top-dev-bar py-1.5 px-4 flex flex-col justify-center items-center text-center leading-tight">
                        <div className="font-medium">Developed by Engr. Franz Xyrlo I. Tobias, PEE</div>
                        <div className="flex items-center mt-0.5"><i className="fas fa-phone-alt text-[0.6rem] mr-1"></i> 0936 923 8834</div>
                    </div>

                    <header className="main-header text-white px-4 pt-4 pb-0 sticky top-0 z-50">
                        <div className="flex justify-between items-center mb-4">
                            <div className="flex items-center gap-3">
                                <div className="w-12 h-12 rounded-full bg-yellow-400 flex items-center justify-center text-blue-900 font-bold border-2 border-white text-xl shadow-md">50</div>
                                <div><h1 className="font-bold text-xl leading-none">IIEE Convention</h1><p className="text-xs text-blue-200 mt-1">Nov 24-29, 2025 • SMX</p></div>
                            </div>
                        </div>
                        <div className="sim-time-bar rounded-lg p-2 mb-4 flex justify-between items-center shadow-inner">
                            <div className="text-yellow-300 font-mono font-bold text-sm flex items-center"><i className="far fa-clock mr-2 text-white"></i> {formatSimTime(simTime)}</div>
                            <div className="flex gap-1">
                                <button onClick={() => adjustTime(-1, 'D')} className="px-2 py-1 bg-white/10 rounded text-xs hover:bg-white/20">-1D</button>
                                <button onClick={() => adjustTime(-1, 'H')} className="px-2 py-1 bg-white/10 rounded text-xs hover:bg-white/20">-1H</button>
                                <button onClick={() => adjustTime(1, 'H')} className="px-2 py-1 bg-white/10 rounded text-xs hover:bg-white/20">+1H</button>
                                <button onClick={() => adjustTime(1, 'D')} className="px-2 py-1 bg-white/10 rounded text-xs hover:bg-white/20">+1D</button>
                            </div>
                        </div>
                        {view === 'schedule' && (
                            <div className="flex text-sm font-medium pt-1">
                                {['ALL', 'NOW', 'SOON', 'MY AGENDA'].map(tab => (
                                    <button key={tab} onClick={() => setSubTab(tab)} className={`mr-6 pb-3 transition-colors ${subTab === tab ? 'tab-active' : 'tab-inactive'}`}>{tab}</button>
                                ))}
                            </div>
                        )}
                    </header>

                    <main className="flex-1 bg-gray-100 p-4">
                        {view === 'schedule' && <ScheduleContent />}
                        {view === 'menu' && <MenuContent />}
                        {view === 'calendar' && <CalendarContent />}
                        {view === 'notes' && <NotesListView />}
                        {view === 'speakers' && <SpeakersListView />}
                        {view === 'cpd' && (
                            <div className="flex flex-col items-center justify-center h-64 text-gray-400"><i className="fas fa-certificate text-6xl mb-4 text-gray-300"></i><p>CPD Tracker</p></div>
                        )}
                    </main>

                    {/* SPEAKER MODAL */}
                    {showSpeakerModal && activeSpeaker && (
                        <div className="fixed inset-0 z-[60] modal-backdrop flex items-center justify-center p-4 animate-fade-in" onClick={() => setShowSpeakerModal(false)}>
                            <div className="bg-white w-full max-w-sm rounded-xl overflow-hidden shadow-2xl" onClick={e => e.stopPropagation()}>
                                <div className="bg-blue-900 p-6 flex flex-col items-center text-center relative">
                                    <button onClick={() => setShowSpeakerModal(false)} className="absolute top-4 right-4 text-white/50 hover:text-white"><i className="fas fa-times text-xl"></i></button>
                                    <div className="w-20 h-20 bg-white rounded-full flex items-center justify-center text-2xl font-bold text-blue-900 border-4 border-blue-200 shadow-lg mb-3">
                                        {activeSpeaker.name.split(' ')[1][0]}{activeSpeaker.name.split(' ').pop()[0]}
                                    </div>
                                    <h3 className="text-white font-bold text-lg leading-tight mb-1">{activeSpeaker.name}</h3>
                                    <span className="bg-yellow-400 text-blue-900 text-xs font-bold px-2 py-0.5 rounded-full">{activeSpeaker.creds}</span>
                                </div>
                                <div className="p-6">
                                    <div className="mb-4">
                                        <label className="text-xs font-bold text-gray-400 uppercase tracking-wide">Role</label>
                                        <p className="text-gray-800 font-medium">{activeSpeaker.role}</p>
                                    </div>
                                    <div>
                                        <label className="text-xs font-bold text-gray-400 uppercase tracking-wide">Biography</label>
                                        <p className="text-sm text-gray-600 leading-relaxed mt-1">{activeSpeaker.bio}</p>
                                    </div>
                                    <button onClick={() => setShowSpeakerModal(false)} className="w-full mt-6 bg-gray-100 text-gray-600 py-2 rounded-lg font-bold hover:bg-gray-200">Close</button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* NOTE MODAL */}
                    {showNoteModal && (
                        <div className="fixed inset-0 z-[60] modal-backdrop flex items-center justify-center p-4 animate-fade-in" onClick={() => setShowNoteModal(false)}>
                            <div className="bg-white w-full max-w-sm rounded-xl p-5 shadow-2xl transform transition-all" onClick={e => e.stopPropagation()}>
                                <div className="flex justify-between items-center mb-4">
                                    <h3 className="font-bold text-gray-800 text-lg">Personal Note</h3>
                                    <button onClick={() => setShowNoteModal(false)} className="text-gray-400 hover:text-gray-600"><i className="fas fa-times text-xl"></i></button>
                                </div>
                                <div className="mb-4">
                                    <textarea ref={noteInputRef} className="w-full h-40 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none resize-none text-gray-700 bg-gray-50" placeholder="Type notes here..." value={tempNoteText} onChange={(e) => setTempNoteText(e.target.value)}></textarea>
                                </div>
                                <div className="flex gap-3">
                                    <button onClick={() => setShowNoteModal(false)} className="flex-1 py-2 rounded-lg border border-gray-300 text-gray-600 font-medium hover:bg-gray-50">Cancel</button>
                                    <button onClick={saveNote} className="flex-1 py-2 rounded-lg bg-blue-700 text-white font-medium hover:bg-blue-800 shadow-lg">Save Note</button>
                                </div>
                            </div>
                        </div>
                    )}

                    <nav className="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 flex justify-between items-center px-6 h-20 max-w-[480px] mx-auto z-50 bottom-nav-shadow rounded-t-2xl">
                        <button onClick={() => setView('schedule')} className={`flex flex-col items-center justify-center ${view === 'schedule' ? 'text-blue-800' : 'text-gray-400'}`}>
                            <i className="far fa-calendar-check text-xl mb-1"></i><span className="text-[10px] font-medium">Schedule</span>
                        </button>
                        <button onClick={() => setView('calendar')} className={`flex flex-col items-center justify-center ${view === 'calendar' ? 'text-blue-800' : 'text-gray-400'}`}>
                            <i className="far fa-calendar text-xl mb-1"></i><span className="text-[10px] font-medium">Calendar</span>
                        </button>
                        <div className="relative -top-6">
                            <button onClick={() => setView('notes')} className={`w-14 h-14 rounded-full bg-yellow-400 flex items-center justify-center shadow-lg border-4 border-gray-50 text-blue-900 transform transition-transform active:scale-95 ${view === 'notes' ? 'ring-4 ring-blue-100' : ''}`}>
                                <i className="fas fa-pen-nib text-xl"></i>
                            </button>
                        </div>
                        <button onClick={() => setView('cpd')} className={`flex flex-col items-center justify-center ${view === 'cpd' ? 'text-blue-800' : 'text-gray-400'}`}>
                            <i className="fas fa-ribbon text-xl mb-1"></i><span className="text-[10px] font-medium">CPD</span>
                        </button>
                        <button onClick={() => setView('menu')} className={`flex flex-col items-center justify-center ${view === 'menu' ? 'text-blue-800' : 'text-gray-400'}`}>
                            <i className="fas fa-bars text-xl mb-1"></i><span className="text-[10px] font-medium">Menu</span>
                        </button>
                    </nav>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
